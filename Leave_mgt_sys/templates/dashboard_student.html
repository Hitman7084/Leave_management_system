{% extends "base.html" %}
{% load static %}
{% block title %}Student Dashboard{% endblock %}

{% block sidebar %}
<div class="sidenav">
    <a href="{% url 'dashboard_student' %}">
        <span class="icon">
            <img src="{% static 'svg/house-solid.svg' %}" style="width: 1.5em; height: 1.5em;">
        </span>
        <span class="text">Home</span>
    </a>
    <a href="{% url 'student_profile' %}">
        <span class="icon">
            <img src="{% static 'svg/user-solid.svg' %}" style="width: 1.5em; height: 1.5em;">
        </span>
        <span class="text">Profile</span>
    </a>
    <a href="{% url 'student_form' %}">
        <span class="icon">
            <img src="{% static 'svg/file-solid.svg' %}" style="width: 1.5em; height: 1.5em;">
        </span>
        <span class="text">Form</span>
    </a>
    <a href="{% url 'student_history' %}">
        <span class="icon">
            <img src="{% static 'svg/clock-rotate-left-solid.svg' %}" style="width: 1.5em; height: 1.5em;">
        </span>
        <span class="text">History</span>
    </a>
    <form method="post" action="{% url 'logout' %}">
        {% csrf_token %}
        <button class="logout-btn">
            <span class="icon">
                <img src="{% static 'svg/right-from-bracket-solid.svg' %}" style="width: 1.5em; height: 1.5em;">
            </span>
            <span class="text">Logout</span>
        </button>
    </form>
</div>
{% endblock %}

{% block content %}
<div class="main-content">
    <h1>Welcome {{ user.full_name }} and fk you</h1>
    <div id="calendar"></div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        let calendarEl = document.getElementById("calendar");
        let calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: "dayGridMonth",
            events: "{% url 'leave_calendar_api' %}", // Fetch leave data from Django API
            eventColor: "#3788d8",
            eventDisplay: "block"
        });
        calendar.render();
    });
</script>

{% endblock %}
